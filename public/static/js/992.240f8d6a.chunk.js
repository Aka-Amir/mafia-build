"use strict";(self.webpackChunkawesome_panel=self.webpackChunkawesome_panel||[]).push([[992],{86992:function(t,e,s){s.r(e),s.d(e,{StatisticsComponent:function(){return P},default:function(){return R}});var i=s(15671),a=s(43144),n=s(97326),o=s(60136),r=s(27277),c=s(66274),l=s(99359),S=s(72791),u=s(72081),h=s(60364),g=s(16871),p=s(44883),f=s(80184),d=S.lazy((function(){return Promise.all([s.e(208),s.e(890)]).then(s.bind(s,38890))})),m=S.lazy((function(){return Promise.all([s.e(208),s.e(572),s.e(138)]).then(s.bind(s,95138))})),v=S.lazy((function(){return s.e(738).then(s.bind(s,73738))})),D=(0,l.Z)("service"),Z=function(t){(0,o.Z)(s,t);var e=(0,r.Z)(s);function s(t){var a;return(0,i.Z)(this,s),a=e.call(this,t),Object.defineProperty((0,n.Z)(a),D,{writable:!0,value:void 0}),a.tryReadUsersStatisticsFromStore=function(){return!!a.props.statistics.users&&(a.onUsersDataRcieved(a.props.statistics.users),!0)},a.tryReadShopStatisticsFromStore=function(){return!!a.props.statistics.shop&&(a.onShopDataRecieved(a.props.statistics.shop),!0)},a.onUsersDataRcieved=function(t){var e=[],s=t.UsersCount,i=t.OnlineUsersCount;for(var n in s.NumberOfRegistrationsByDate)e.push({date:n,"\u0627\u0641\u0631\u0627\u062f \u062b\u0628\u062a \u0646\u0627\u0645 \u0634\u062f\u0647":s.NumberOfRegistrationsByDate[n]});a.setState({dateRegister:e,registeredCount:s.UserCount,isLoading:!1,onlineCount:i,_mainUserStatistics:s})},a.onShopDataRecieved=function(t){a.setState({_mainShopStatistics:t},(function(){a.getFirstLevel(),a.getMostSellingPlatform(),a.getMostFactorRegisteredPlatform(),a.getMostSelling(),a.getProfit()}))},a.getUserStatistics=function(){return(0,c.Z)((0,n.Z)(a),D)[D].GetUsersStatistics().then((function(t){0!==t&&a.onUsersDataRcieved(t)}))},a.getShopStatistics=function(){return(0,c.Z)((0,n.Z)(a),D)[D].GetShopStatistics().then((function(t){0!==t&&a.onShopDataRecieved(t)}))},a.getFirstLevel=function(){a.setState({shopData:(0,c.Z)((0,n.Z)(a),D)[D].shopStatisticsService(a.state._mainShopStatistics).getBasic()})},a.getProfit=function(){var t=(0,c.Z)((0,n.Z)(a),D)[D].shopStatisticsService(a.state._mainShopStatistics).getProfitAmount();console.log(t)},a.getShopStatisticsRange=function(t,e){a.setState({shopData:(0,c.Z)((0,n.Z)(a),D)[D].shopStatisticsService(a.state._mainShopStatistics).getRange(t,e)})},a.getShopStatisticsByKey=function(t){var e=(0,c.Z)((0,n.Z)(a),D)[D].shopStatisticsService(a.state._mainShopStatistics);a.setState({shopData:t?e.getFromDate(t):e.getBasic()})},a.getMostSelling=function(){var t=(0,c.Z)((0,n.Z)(a),D)[D].shopStatisticsService(a.state._mainShopStatistics).getMostSelling();a.setState({mostSellingProductsData:t})},a.getMostSellingPlatform=function(){var t=(0,c.Z)((0,n.Z)(a),D)[D].shopStatisticsService(a.state._mainShopStatistics).getMostSellingPlatform();return a.setState({sellingPlatformData:t}),t},a.getMostFactorRegisteredPlatform=function(){var t=(0,c.Z)((0,n.Z)(a),D)[D].shopStatisticsService(a.state._mainShopStatistics).getMostFactorCountPlatform();return a.setState({sellingPlatformCount:t}),t},a.factorsDispatcher=function(t){switch(t){case 1:default:return a.getMostSellingPlatform();case 2:return a.getMostFactorRegisteredPlatform()}},a.state={dateRegister:[],registeredCount:0,shopData:[],sellingPlatformData:[],sellingPlatformCount:[],isLoading:!0,onlineCount:0,mostSellingProductsData:[],_mainUserStatistics:{},_mainShopStatistics:[]},(0,c.Z)((0,n.Z)(a),D)[D]=p._.instance?p._.instance:new p._(t.token||t.auth),a}return(0,a.Z)(s,[{key:"componentDidMount",value:function(){this.tryReadUsersStatisticsFromStore()||this.getUserStatistics(),this.tryReadShopStatisticsFromStore()||this.getShopStatistics()}},{key:"render",value:function(){return(0,f.jsx)(f.Fragment,{children:this.state.isLoading?(0,f.jsx)(f.Fragment,{children:"Loading..."}):(0,f.jsxs)(g.Z5,{children:[(0,f.jsx)(g.AW,{path:"/",element:(0,f.jsx)(S.Suspense,{fallback:(0,f.jsx)(f.Fragment,{children:"Loading..."}),children:(0,f.jsx)(u.b,{children:(0,f.jsx)(v,{})})})}),(0,f.jsx)(g.AW,{path:"/users",element:(0,f.jsx)(S.Suspense,{fallback:(0,f.jsx)(f.Fragment,{children:"Loading..."}),children:(0,f.jsx)(u.b,{children:(0,f.jsx)(d,{onlineUsers:this.state.onlineCount,registeredCount:this.state.registeredCount,dateRegister:this.state.dateRegister})})})}),(0,f.jsx)(g.AW,{path:"/shop",element:(0,f.jsx)(S.Suspense,{fallback:(0,f.jsx)(f.Fragment,{children:"Loading..."}),children:(0,f.jsx)(u.b,{children:(0,f.jsx)(m,{sellingPlatformData:this.state.sellingPlatformData,sellingPlatformCount:this.state.sellingPlatformCount,mostSellingProductsData:this.state.mostSellingProductsData,getMostSelling:this.getMostSelling,generateNewDataByKey:this.getShopStatisticsByKey,getRange:this.getShopStatisticsRange,shopData:this.state.shopData,dispatchFactor:this.factorsDispatcher})})})})]})})}}]),s}(S.Component),P=(0,h.$j)((function(t){return t}))(Z),R=P}}]);
//# sourceMappingURL=992.240f8d6a.chunk.js.map