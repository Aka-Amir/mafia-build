"use strict";(self.webpackChunkawesome_panel=self.webpackChunkawesome_panel||[]).push([[911],{55911:function(e,n,t){t.r(n),t.d(n,{AdminComponent:function(){return _},default:function(){return C}});var r=t(1413),s=t(15861),a=t(15671),i=t(43144),u=t(97326),c=t(60136),o=t(27277),d=t(66274),l=t(99359),f=t(87757),p=t.n(f),h=t(72791),m=t(60364),v=t(16871),b=t(72081),x=t(37019),Z=t(13796),k=(0,l.Z)("engine"),g=function(){function e(n){if((0,a.Z)(this,e),Object.defineProperty(this,k,{writable:!0,value:new Z.Z(x.Z.CreatePath("admin"))}),""===n)throw new Error("ERrir");(0,d.Z)(this,k)[k].SetHeader("authorization",n)}return(0,i.Z)(e,[{key:"createAdmin",value:function(){var e=(0,s.Z)(p().mark((function e(n){var t;return p().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,(0,d.Z)(this,k)[k].Post("/signup",n);case 3:return t=e.sent,e.abrupt("return",{status:1,data:t.body});case 7:return e.prev=7,e.t0=e.catch(0),e.abrupt("return",{status:-1,code:e.t0.response.status});case 10:case"end":return e.stop()}}),e,this,[[0,7]])})));return function(n){return e.apply(this,arguments)}}()},{key:"defineTask",value:function(){var e=(0,s.Z)(p().mark((function e(n){var t;return p().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,(0,d.Z)(this,k)[k].Post("/tasks",n);case 3:return t=e.sent,e.abrupt("return",{status:1,payload:t});case 7:return e.prev=7,e.t0=e.catch(0),console.trace(e.t0),e.abrupt("return",{status:-1,payload:e.t0.response});case 11:case"end":return e.stop()}}),e,this,[[0,7]])})));return function(n){return e.apply(this,arguments)}}()},{key:"getUsers",value:function(){var e=(0,s.Z)(p().mark((function e(){var n;return p().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,(0,d.Z)(this,k)[k].Get("/admins");case 3:return n=e.sent,e.abrupt("return",n.body.Payload);case 7:return e.prev=7,e.t0=e.catch(0),console.trace(e.t0),e.abrupt("return",-1);case 11:case"end":return e.stop()}}),e,this,[[0,7]])})));return function(){return e.apply(this,arguments)}}()}]),e}(),A=t(79138),y=t(80184),j=(0,h.lazy)((function(){return Promise.all([t.e(547),t.e(278)]).then(t.bind(t,63278))})),w=(0,h.lazy)((function(){return Promise.all([t.e(795),t.e(548)]).then(t.bind(t,96548))})),S=(0,h.lazy)((function(){return Promise.all([t.e(795),t.e(13)]).then(t.bind(t,96013))})),F=(0,l.Z)("service"),G=function(e){(0,c.Z)(t,e);var n=(0,o.Z)(t);function t(e){var i;return(0,a.Z)(this,t),i=n.call(this,e),Object.defineProperty((0,u.Z)(i),F,{writable:!0,value:void 0}),i.getAdmins=function(){(0,d.Z)((0,u.Z)(i),F)[F].getUsers().then((function(e){i.setState({admins:e},(function(){console.log(i.state)}))}))},i.onAdminSelected=function(e){i.props.redirect(e?"./update/".concat(e):"./create")},i.createAdmin=function(){var e=(0,s.Z)(p().mark((function e(n){var t;return p().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,(0,d.Z)((0,u.Z)(i),F)[F].createAdmin(n);case 3:if(t=e.sent,console.log(t),-1!==t.status){e.next=7;break}return e.abrupt("return",[!1,t.code]);case 7:return i.getAdmins(),e.abrupt("return",[!0,t.status]);case 11:return e.prev=11,e.t0=e.catch(0),console.log(e.t0),e.abrupt("return",[!1,-1]);case 15:case"end":return e.stop()}}),e,null,[[0,11]])})));return function(n){return e.apply(this,arguments)}}(),i.onUpdate=function(){},i.onAdminDelete=function(){},i.onAssignTask=function(e){i.props.redirect("./set_task/"+e)},i.SubmitTask=function(){var e=(0,s.Z)(p().mark((function e(n){var t,s;return p().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=(0,r.Z)((0,r.Z)({},n),{},{Creator:i.props.user.UserId}),e.next=3,(0,d.Z)((0,u.Z)(i),F)[F].defineTask(t);case 3:return s=e.sent,e.abrupt("return",s);case 5:case"end":return e.stop()}}),e)})));return function(n){return e.apply(this,arguments)}}(),i.state={admins:[]},(0,d.Z)((0,u.Z)(i),F)[F]=new g(e.token),i}return(0,i.Z)(t,[{key:"componentDidMount",value:function(){this.getAdmins()}},{key:"render",value:function(){var e=this;return(0,y.jsxs)(v.Z5,{children:[(0,y.jsx)(v.AW,{path:"/",element:(0,y.jsx)(b.b,{children:(0,y.jsx)(h.Suspense,{fallback:(0,y.jsx)(y.Fragment,{children:"Loading..."}),children:(0,y.jsx)(j,{assingTask:this.onAssignTask,admins:this.state.admins,onDelete:this.onAdminDelete,onSelect:this.onAdminSelected,myAccess:(0,A.aS)(this.props.user.Access)})})})}),(0,y.jsx)(v.AW,{path:"/update/:id",element:(0,y.jsx)(b.b,{children:(0,y.jsx)(h.Suspense,{fallback:(0,y.jsx)(y.Fragment,{children:"Loading..."}),children:(0,y.jsx)(w,{onGoBack:function(){e.props.redirect("./")},admins:this.state.admins,onCreate:this.onUpdate})})})}),(0,y.jsx)(v.AW,{path:"/create",element:(0,y.jsx)(b.b,{children:(0,y.jsx)(h.Suspense,{fallback:(0,y.jsx)(y.Fragment,{children:"Loading..."}),children:(0,y.jsx)(w,{onGoBack:function(){e.props.redirect("./")},onCreate:this.createAdmin,admins:this.state.admins})})})}),(0,y.jsx)(v.AW,{path:"/set_task/:id",element:(0,y.jsx)(b.b,{children:(0,y.jsx)(h.Suspense,{fallback:(0,y.jsx)(y.Fragment,{children:"Loading..."}),children:(0,y.jsx)(S,{onSubmit:this.SubmitTask,defaultMode:0,retry:function(){var n=(0,s.Z)(p().mark((function n(t){var r;return p().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return n.next=2,(0,d.Z)(e,F)[F].getUsers();case 2:if(-1===(r=n.sent)){n.next=8;break}return e.setState({admins:r}),n.abrupt("return",r.find((function(e){return e._id===t})));case 8:return n.abrupt("return",!1);case 9:case"end":return n.stop()}}),n)})));return function(e){return n.apply(this,arguments)}}(),getAdmin:function(n){return e.state.admins.find((function(e){return e._id===n}))},onGoBack:function(){e.props.redirect("./")}})})})}),(0,y.jsx)(v.AW,{path:"/set_msg/:id",element:(0,y.jsx)(b.b,{children:(0,y.jsx)(h.Suspense,{fallback:(0,y.jsx)(y.Fragment,{children:"Loading..."}),children:(0,y.jsx)(S,{onSubmit:this.SubmitTask,defaultMode:4,retry:function(){var n=(0,s.Z)(p().mark((function n(t){var r;return p().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return n.next=2,(0,d.Z)(e,F)[F].getUsers();case 2:if(-1===(r=n.sent)){n.next=8;break}return e.setState({admins:r}),n.abrupt("return",r.find((function(e){return e._id===t})));case 8:return n.abrupt("return",!1);case 9:case"end":return n.stop()}}),n)})));return function(e){return n.apply(this,arguments)}}(),getAdmin:function(n){return e.state.admins.find((function(e){return e._id===n}))},onGoBack:function(){e.props.redirect("./")}})})})})]})}}]),t}(h.Component),_=(0,m.$j)((function(e){return e}))(G),C=_},79138:function(e,n,t){t.d(n,{xi:function(){return o},mZ:function(){return d},HA:function(){return l},aS:function(){return f}});var r=t(1413),s=t(4942),a=t(37762),i={FullAccess:"FullAccess",Accounting:"Accounting",Game:"Game",Files:"Files",Shop:"Shop"},u={FullAccess:"FullAccess",Create:"Create",Delete:"Delete",Modify:"Modify",Get:"Get"},c=function(e,n){if(!Object.keys(i).includes(e))throw new Error("ArgumentError");var t,r=(0,a.Z)(n);try{for(r.s();!(t=r.n()).done;){var c=t.value;if(!Object.keys(u).includes(c))throw new Error("WrongAccessLevel")}}catch(o){r.e(o)}finally{r.f()}return(0,s.Z)({},e,n)},o=Object.freeze({manager:1,shop_manager:2,analyzer:3}),d=[{name:"\u0622\u0646\u0627\u0644\u06cc\u0632\u0648\u0631",id:o.analyzer,detail:(0,r.Z)((0,r.Z)((0,r.Z)({},c(i.Accounting,[u.FullAccess])),c(i.Shop,[u.Get])),c(i.Files,[u.Get]))},{name:"\u0645\u062f\u06cc\u0631 \u0641\u0631\u0648\u0634\u06af\u0627\u0647",id:o.shop_manager,detail:(0,r.Z)((0,r.Z)({},c(i.Shop,[u.FullAccess])),c(i.Files,[u.FullAccess]))},{name:"\u0645\u062f\u06cc\u0631\u06cc\u062a",id:o.manager,detail:(0,r.Z)({},c(i.FullAccess,[u.FullAccess]))}];function l(e){var n=JSON.stringify(e),t=d.find((function(e){return JSON.stringify(e.detail)===n}));return t?t.name:"\u0627\u062f\u0645\u06cc\u0646"}function f(e){var n=JSON.stringify(e),t=d.find((function(e){return JSON.stringify(e.detail)===n}));return t?t.id:0}}}]);
//# sourceMappingURL=911.e0118478.chunk.js.map