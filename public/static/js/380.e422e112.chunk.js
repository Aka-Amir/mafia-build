"use strict";(self.webpackChunkawesome_panel=self.webpackChunkawesome_panel||[]).push([[380],{52380:function(t,e,a){a.r(e),a.d(e,{Tasks:function(){return P},default:function(){return W}});var o=a(15861),r=a(37762),n=a(15671),i=a(43144),s=a(97326),d=a(60136),l=a(27277),c=a(66274),u=a(99359),p=a(87757),h=a.n(p),v=a(81489),g=a(13239),f=a(55646),m=a(19658),b=a(2199),Z=a(24518),x=a(72081),k=a(72791),T=a(60364),S=a(16871),j=a(9456),y=a(8698),R=a(63412),z=a(8130),w=a(80184),C=k.lazy((function(){return Promise.all([a.e(547),a.e(90)]).then(a.bind(a,45090))})),E=k.lazy((function(){return a.e(78).then(a.bind(a,30078))})),F=(0,u.Z)("service"),M=function(t){(0,d.Z)(a,t);var e=(0,l.Z)(a);function a(t){var o;return(0,n.Z)(this,a),o=e.call(this,t),Object.defineProperty((0,s.Z)(o),F,{writable:!0,value:void 0}),o.getTasks=function(){o.setState({httpProgress:!0},(function(){(0,c.Z)((0,s.Z)(o),F)[F].getAll().then((function(t){var e,a=t.data.filter((function(t){return t.Status<4})),n=[],i=[],s=(0,r.Z)(a);try{for(s.s();!(e=s.n()).done;){var d=e.value;d.Creator._id===o.props.user.UserId?i.push(d):n.push(d)}}catch(l){s.e(l)}finally{s.f()}o.setState({tasks:n,otherTasks:i})})).finally((function(){return o.setState({httpProgress:!1})}))}))},o.dispatchTask=function(t){var e=t.id,a=t.newState;return o.state.tasks.find((function(t){return t._id===e})).Status!==a&&o.setState({httpProgress:!0},(function(){(0,c.Z)((0,s.Z)(o),F)[F].updateTask(e,a).then((function(t){var e;1===t.status?(o.setState({taskUpdated:!0,httpFailed:!1,httpErrorMessage:""},o.getTasks),setTimeout((function(){o.setState({taskUpdated:!1,httpFailed:!1,httpErrorMessage:""})}),5e3)):(console.log("else"),o.setState({httpProgress:!1,taskUpdated:!0,httpFailed:!0,httpErrorMessage:"\u062e\u0637\u0627 \u062f\u0631 \u0627\u0631\u0633\u0627\u0644 \u0627\u0637\u0644\u0627\u0639\u0627\u062a. \u06a9\u062f "+(null===(e=t.data)||void 0===e?void 0:e.status)},(function(){console.log("set state")})),setTimeout((function(){o.setState({taskUpdated:!1})}),5e3))}))})),!1},o.deleteTask=function(t){return o.setState({httpProgress:!0},(function(){(0,c.Z)((0,s.Z)(o),F)[F].deletTask(t).then((function(t){var e;1===t.status?(o.setState({taskUpdated:!0,httpFailed:!1,httpErrorMessage:""},o.getTasks),setTimeout((function(){o.setState({taskUpdated:!1,httpFailed:!1,httpErrorMessage:""})}),5e3)):(console.log("else"),o.setState({httpProgress:!1,taskUpdated:!0,httpFailed:!0,httpErrorMessage:"\u062e\u0637\u0627 \u062f\u0631 \u0627\u0646\u062c\u0627\u0645 \u0639\u0645\u0644\u06cc\u0627\u062a. \u06a9\u062f "+(null===(e=t.data)||void 0===e?void 0:e.status)},(function(){console.log("set state")})),setTimeout((function(){o.setState({taskUpdated:!1})}),5e3))}))})),!1},o.state={myTasks:!0,otherTasks:[],httpProgress:!1,taskUpdated:!1,httpFailed:!1,httpErrorMessage:"",canSelect:!0,tasks:[],messages:t.messages},(0,c.Z)((0,s.Z)(o),F)[F]=new j.C(t.token),o}return(0,i.Z)(a,[{key:"componentDidMount",value:function(){this.getTasks()}},{key:"componentWillUnmount",value:function(){this.setState({canSelect:!0})}},{key:"render",value:function(){var t=this;return(0,w.jsxs)(w.Fragment,{children:[(0,w.jsx)(v.Z,{open:this.state.httpProgress,sx:{color:"#fff",zIndex:function(t){return t.zIndex.drawer+1}},children:(0,w.jsx)(g.Z,{})}),(0,w.jsx)(f.Z,{open:this.state.taskUpdated,anchorOrigin:{vertical:"bottom",horizontal:"center"},children:(0,w.jsx)(m.Z,{severity:this.state.httpFailed?"error":"success",sx:{width:"100%"},children:this.state.httpFailed?this.state.httpErrorMessage:"\u0628\u0627 \u0645\u0648\u0641\u0642\u06cc\u062a \u0627\u0646\u062c\u0627\u0645 \u0634\u062f"})}),this.state.canSelect&&(0,w.jsx)("div",{className:"row",children:(0,w.jsx)("div",{className:"col-12 mb-3",children:(0,w.jsxs)(b.Z,{variant:"text",color:"secondary",className:"w-100",children:[(0,w.jsxs)(Z.Z,{onClick:function(){t.props.redirect("./"),t.setState({myTasks:!0})},variant:this.state.myTasks?"contained":"text",className:"w-50",children:["\u062a\u0633\u06a9 \u0647\u0627\u06cc \u0645\u0646 ",(0,w.jsx)(y.Z,{className:"me-3"})]}),(0,w.jsxs)(Z.Z,{onClick:function(){t.props.redirect("./others"),t.setState({myTasks:!1})},variant:this.state.myTasks?"text":"contained",className:"w-50",children:["\u062a\u0633\u06a9 \u0647\u0627\u06cc\u06cc \u06a9\u0647 \u0628\u0647 \u0628\u0642\u06cc\u0647 \u0633\u067e\u0631\u062f\u0645 ",(0,w.jsx)(R.Z,{className:"me-3"})]})]})})}),(0,w.jsxs)(S.Z5,{children:[(0,w.jsx)(S.AW,{path:"/",element:(0,w.jsx)(k.Suspense,{fallback:(0,w.jsx)(w.Fragment,{children:"Loading..."}),children:(0,w.jsx)(x.b,{children:(0,w.jsx)(C,{dispatchTask:this.dispatchTask,tasks:this.state.tasks,myTasks:this.state.myTasks})})})}),(0,w.jsx)(S.AW,{path:"/others",element:(0,w.jsx)(k.Suspense,{fallback:(0,w.jsx)(w.Fragment,{children:"Loading..."}),children:(0,w.jsx)(x.b,{children:(0,w.jsx)(C,{deleteTask:this.deleteTask,tasks:this.state.otherTasks})})})}),(0,w.jsx)(S.AW,{path:"/message/:id",element:(0,w.jsx)(k.Suspense,{fallback:(0,w.jsx)(w.Fragment,{children:"Loading..."}),children:(0,w.jsx)(x.b,{children:(0,w.jsx)(E,{onActive:function(){return t.setState({canSelect:!1})},getMessageDetails:function(e){return t.state.messages.find((function(t){return t._id===e}))},sendDm:function(e){t.props.redirect("../admins/set_msg/"+e)},retry:(0,o.Z)(h().mark((function e(){var a;return h().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,(0,c.Z)(t,F)[F].getAll();case 2:if(1!==(a=e.sent).status){e.next=6;break}return t.setState({messages:a.data},(function(){t.props.dispatch({type:z.Z.SET,payload:a.data})})),e.abrupt("return",!0);case 6:return e.abrupt("return",!1);case 7:case"end":return e.stop()}}),e)})))})})})})]})]})}}]),a}(k.Component),P=(0,T.$j)((function(t){return t}))(M),W=P},63412:function(t,e,a){var o=a(95318);e.Z=void 0;var r=o(a(45649)),n=a(80184),i=(0,r.default)((0,n.jsx)("path",{d:"M20 4H4c-1.1 0-2 .9-2 2v12c0 1.1.9 2 2 2h9v-2H4V8l8 5 8-5v5h2V6c0-1.1-.9-2-2-2zm-8 7L4 6h16l-8 5zm7 4 4 4-4 4v-3h-4v-2h4v-3z"}),"ForwardToInbox");e.Z=i},8698:function(t,e,a){var o=a(95318);e.Z=void 0;var r=o(a(45649)),n=a(80184),i=(0,r.default)((0,n.jsx)("path",{d:"M19 3H4.99c-1.11 0-1.98.9-1.98 2L3 19c0 1.1.88 2 1.99 2H19c1.1 0 2-.9 2-2V5c0-1.1-.9-2-2-2zm0 12h-4c0 1.66-1.35 3-3 3s-3-1.34-3-3H4.99V5H19v10zm-3-5h-2V7h-4v3H8l4 4 4-4z"}),"MoveToInbox");e.Z=i},2199:function(t,e,a){a.d(e,{Z:function(){return x}});var o=a(4942),r=a(63366),n=a(87462),i=a(72791),s=a(28182),d=a(90767),l=a(12065),c=a(14036),u=a(47630),p=a(61046),h=a(95159);function v(t){return(0,h.Z)("MuiButtonGroup",t)}var g=(0,a(30208).Z)("MuiButtonGroup",["root","contained","outlined","text","disableElevation","disabled","fullWidth","vertical","grouped","groupedHorizontal","groupedVertical","groupedText","groupedTextHorizontal","groupedTextVertical","groupedTextPrimary","groupedTextSecondary","groupedOutlined","groupedOutlinedHorizontal","groupedOutlinedVertical","groupedOutlinedPrimary","groupedOutlinedSecondary","groupedContained","groupedContainedHorizontal","groupedContainedVertical","groupedContainedPrimary","groupedContainedSecondary"]),f=a(91793),m=a(80184),b=["children","className","color","component","disabled","disableElevation","disableFocusRipple","disableRipple","fullWidth","orientation","size","variant"],Z=(0,u.ZP)("div",{name:"MuiButtonGroup",slot:"Root",overridesResolver:function(t,e){var a=t.ownerState;return[(0,o.Z)({},"& .".concat(g.grouped),e.grouped),(0,o.Z)({},"& .".concat(g.grouped),e["grouped".concat((0,c.Z)(a.orientation))]),(0,o.Z)({},"& .".concat(g.grouped),e["grouped".concat((0,c.Z)(a.variant))]),(0,o.Z)({},"& .".concat(g.grouped),e["grouped".concat((0,c.Z)(a.variant)).concat((0,c.Z)(a.orientation))]),(0,o.Z)({},"& .".concat(g.grouped),e["grouped".concat((0,c.Z)(a.variant)).concat((0,c.Z)(a.color))]),e.root,e[a.variant],!0===a.disableElevation&&e.disableElevation,a.fullWidth&&e.fullWidth,"vertical"===a.orientation&&e.vertical]}})((function(t){var e=t.theme,a=t.ownerState;return(0,n.Z)({display:"inline-flex",borderRadius:e.shape.borderRadius},"contained"===a.variant&&{boxShadow:e.shadows[2]},a.disableElevation&&{boxShadow:"none"},a.fullWidth&&{width:"100%"},"vertical"===a.orientation&&{flexDirection:"column"},(0,o.Z)({},"& .".concat(g.grouped),(0,n.Z)({minWidth:40,"&:not(:first-of-type)":(0,n.Z)({},"horizontal"===a.orientation&&{borderTopLeftRadius:0,borderBottomLeftRadius:0},"vertical"===a.orientation&&{borderTopRightRadius:0,borderTopLeftRadius:0},"outlined"===a.variant&&"horizontal"===a.orientation&&{marginLeft:-1},"outlined"===a.variant&&"vertical"===a.orientation&&{marginTop:-1}),"&:not(:last-of-type)":(0,n.Z)({},"horizontal"===a.orientation&&{borderTopRightRadius:0,borderBottomRightRadius:0},"vertical"===a.orientation&&{borderBottomRightRadius:0,borderBottomLeftRadius:0},"text"===a.variant&&"horizontal"===a.orientation&&{borderRight:"1px solid ".concat("light"===e.palette.mode?"rgba(0, 0, 0, 0.23)":"rgba(255, 255, 255, 0.23)")},"text"===a.variant&&"vertical"===a.orientation&&{borderBottom:"1px solid ".concat("light"===e.palette.mode?"rgba(0, 0, 0, 0.23)":"rgba(255, 255, 255, 0.23)")},"text"===a.variant&&"inherit"!==a.color&&{borderColor:(0,l.Fq)(e.palette[a.color].main,.5)},"outlined"===a.variant&&"horizontal"===a.orientation&&{borderRightColor:"transparent"},"outlined"===a.variant&&"vertical"===a.orientation&&{borderBottomColor:"transparent"},"contained"===a.variant&&"horizontal"===a.orientation&&(0,o.Z)({borderRight:"1px solid ".concat(e.palette.grey[400])},"&.".concat(g.disabled),{borderRight:"1px solid ".concat(e.palette.action.disabled)}),"contained"===a.variant&&"vertical"===a.orientation&&(0,o.Z)({borderBottom:"1px solid ".concat(e.palette.grey[400])},"&.".concat(g.disabled),{borderBottom:"1px solid ".concat(e.palette.action.disabled)}),"contained"===a.variant&&"inherit"!==a.color&&{borderColor:e.palette[a.color].dark},{"&:hover":(0,n.Z)({},"outlined"===a.variant&&"horizontal"===a.orientation&&{borderRightColor:"currentColor"},"outlined"===a.variant&&"vertical"===a.orientation&&{borderBottomColor:"currentColor"})}),"&:hover":(0,n.Z)({},"contained"===a.variant&&{boxShadow:"none"})},"contained"===a.variant&&{boxShadow:"none"})))})),x=i.forwardRef((function(t,e){var a=(0,p.Z)({props:t,name:"MuiButtonGroup"}),o=a.children,l=a.className,u=a.color,h=void 0===u?"primary":u,g=a.component,x=void 0===g?"div":g,k=a.disabled,T=void 0!==k&&k,S=a.disableElevation,j=void 0!==S&&S,y=a.disableFocusRipple,R=void 0!==y&&y,z=a.disableRipple,w=void 0!==z&&z,C=a.fullWidth,E=void 0!==C&&C,F=a.orientation,M=void 0===F?"horizontal":F,P=a.size,W=void 0===P?"medium":P,B=a.variant,U=void 0===B?"outlined":B,H=(0,r.Z)(a,b),N=(0,n.Z)({},a,{color:h,component:x,disabled:T,disableElevation:j,disableFocusRipple:R,disableRipple:w,fullWidth:E,orientation:M,size:W,variant:U}),L=function(t){var e=t.classes,a=t.color,o=t.disabled,r=t.disableElevation,n=t.fullWidth,i=t.orientation,s=t.variant,l={root:["root",s,"vertical"===i&&"vertical",n&&"fullWidth",r&&"disableElevation"],grouped:["grouped","grouped".concat((0,c.Z)(i)),"grouped".concat((0,c.Z)(s)),"grouped".concat((0,c.Z)(s)).concat((0,c.Z)(i)),"grouped".concat((0,c.Z)(s)).concat((0,c.Z)(a)),o&&"disabled"]};return(0,d.Z)(l,v,e)}(N),V=i.useMemo((function(){return{className:L.grouped,color:h,disabled:T,disableElevation:j,disableFocusRipple:R,disableRipple:w,fullWidth:E,size:W,variant:U}}),[h,T,j,R,w,E,W,U,L.grouped]);return(0,m.jsx)(Z,(0,n.Z)({as:x,role:"group",className:(0,s.Z)(L.root,l),ref:e,ownerState:N},H,{children:(0,m.jsx)(f.Z.Provider,{value:V,children:o})}))}))}}]);
//# sourceMappingURL=380.e422e112.chunk.js.map